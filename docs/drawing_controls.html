<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Drawing Controls &mdash; paya 0.5.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/tabs.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Connecting Controls" href="connecting_controls.html" />
    <link rel="prev" title="Controls" href="controls.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> paya
          </a>
              <div class="version">
                0.5.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="whats_new.html">What's New</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Rigging</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="maths_rigging.html">Maths</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="controls.html">Controls</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Drawing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#method">Method</a></li>
<li class="toctree-l3"><a class="reference internal" href="#arguments">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="connecting_controls.html">Connecting</a></li>
<li class="toctree-l2"><a class="reference internal" href="offset_groups.html">Offset Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="control_tags_pickwalk.html">Controller Tags and Pick-Walk Hierarchies</a></li>
<li class="toctree-l2"><a class="reference internal" href="control_shapes_cols.html">Shapes and Colors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user_attrs.html">User Attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="joint_chains.html">Joint Chains</a></li>
<li class="toctree-l1"><a class="reference internal" href="ik.html">IK Handles</a></li>
<li class="toctree-l1"><a class="reference internal" href="naming_nodes.html">Node Names</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Customisation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="adding_oo_functionality.html">Adding Your Own Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="package_config.html">Package Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="sugar_and_style.html">Sugar and Style</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="types_index.html">Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="paya.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementation.html">Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="licence.html">MIT License</a></li>
<li class="toctree-l1"><a class="reference internal" href="author.html">Author</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">paya</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="controls.html">Controls</a> &raquo;</li>
      <li>Drawing Controls</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/drawing_controls.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="drawing-controls">
<h1>Drawing Controls<a class="headerlink" href="#drawing-controls" title="Permalink to this headline"></a></h1>
<section id="method">
<h2>Method<a class="headerlink" href="#method" title="Permalink to this headline"></a></h2>
<p>Paya’s <a class="reference internal" href="pools/nodes/transform.html#paya.runtime.nodes.Transform" title="paya.runtime.nodes.Transform"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transform</span></code></a> class provides a special constructor
for controls, <a class="reference internal" href="pools/nodes/transform.html#paya.runtime.nodes.Transform.createControl" title="paya.runtime.nodes.Transform.createControl"><code class="xref py py-meth docutils literal notranslate"><span class="pre">createControl()</span></code></a>. For convenience, this is also available
directly on <a class="reference internal" href="paya/runtime.html#module-paya.runtime" title="paya.runtime"><code class="xref py py-mod docutils literal notranslate"><span class="pre">paya.runtime</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">paya.runtime</span> <span class="k">as</span> <span class="nn">r</span>

<span class="n">r</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Transform</span><span class="o">.</span><span class="n">createControl</span>
<span class="c1"># Same as:</span>
<span class="n">r</span><span class="o">.</span><span class="n">createControl</span>
</pre></div>
</div>
<p>Here’s a rundown of the method’s arguments:</p>
</section>
<section id="arguments">
<h2>Arguments<a class="headerlink" href="#arguments" title="Permalink to this headline"></a></h2>
<dl class="field-list">
<dt class="field-odd">name/n</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a></p>
<p>One or more prefixes for the control’s name. Prefixes may also be inherited from <a class="reference internal" href="paya/lib/names.html#paya.lib.names.Name" title="paya.lib.names.Name"><code class="xref py py-class docutils literal notranslate"><span class="pre">Name</span></code></a>
blocks. The Paya suffix for rig controls will be applied automatically. See <a class="reference internal" href="naming_nodes.html"><span class="doc">Node Names</span></a> for
more information.</p>
</dd>
<dt class="field-even">worldMatrix/wm</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> or <a class="reference internal" href="pools/data/matrix.html#paya.runtime.data.Matrix" title="paya.runtime.data.Matrix"><code class="xref py py-class docutils literal notranslate"><span class="pre">Matrix</span></code></a>; defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>The matrix to apply to the offset group. This will define the control’s ‘zeroed’ pose. You can take world matrices
from other objects (for example, layout locators) or create them yourself.</p>
<p>To take a world matrix from another object, use
<a class="reference external" href="https://help.autodesk.com/cloudhelp/2018/JPN/Maya-Tech-Docs/PyMel/generated/classes/pymel.core.nodetypes/pymel.core.nodetypes.Transform.html#pymel.core.nodetypes.Transform.getMatrix" title="(in PyMEL v1.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transform.getMatrix(worldSpace=True)</span></code></a>. Particular attention
should be given to <em>scale</em>. Inherited scale can be easy to miss, and will be carried over to the control. If this
isn’t intentional (for example, to create fully-mirrored controls), it can be hard to correct after the rig has
received animation. To discard scale, use <a class="reference internal" href="pools/data/matrix.html#paya.runtime.data.Matrix.pick" title="paya.runtime.data.Matrix.pick"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Matrix.pick()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">layoutLoc</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">PyNode</span><span class="p">(</span><span class="s1">&#39;L_foot_guide_LOCT&#39;</span><span class="p">)</span>
<span class="n">controlMatrix</span> <span class="o">=</span> <span class="n">layoutLoc</span><span class="o">.</span><span class="n">getMatrix</span><span class="p">(</span><span class="n">worldSpace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">pick</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># Pass along to createControl() from here</span>
</pre></div>
</div>
<p>To create a matrix from scratch, use <a class="reference internal" href="paya/lib/mathops.html#paya.lib.mathops.createMatrix" title="paya.lib.mathops.createMatrix"><code class="xref py py-func docutils literal notranslate"><span class="pre">paya.runtime.createMatrix()</span></code></a>. See
<a class="reference internal" href="matrices.html#creating-matrices"><span class="std std-ref">Creating Matrices</span></a> for more information.</p>
</dd>
<dt class="field-odd">keyable/k, channelBox/cb</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> of <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>; both default to <code class="docutils literal notranslate"><span class="pre">[]</span></code></p>
<p>These arguments define which standard Maya attributes will be made available for keying or setting in the Channel
Box. They take lists of short or long names, for example <code class="docutils literal notranslate"><span class="pre">['tx',</span> <span class="pre">'rotateOrder']</span></code>. Omitting both arguments will
lead to an empty Channel Box; this can be useful if you plan to use the control solely for options and sliders that
will be added afterwards.</p>
</dd>
<dt class="field-even">rotateOrder/k</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>; defaults to <code class="docutils literal notranslate"><span class="pre">'xyz'</span></code></p>
<p>The control’s rotate order on build.</p>
</dd>
<dt class="field-odd">shape/sh</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> or <code class="docutils literal notranslate"><span class="pre">None</span></code>; defaults to <code class="docutils literal notranslate"><span class="pre">'cube'</span></code></p>
<p>A library shape for the control. Use
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict.keys" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">paya.runtime.controlShapes.keys()</span></code></a> to get a list of available shapes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">controlShapesLibrary</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
<span class="c1"># [&#39;circle&#39;, &#39;cube&#39;, &#39;locator&#39;, &#39;lollipop&#39;, ...</span>
</pre></div>
</div>
</dd>
<dt class="field-even">size/sz</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>; defaults to <code class="docutils literal notranslate"><span class="pre">1.0</span></code></p>
<p>A scaling factor for the control shape.</p>
</dd>
<dt class="field-odd">color/col</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">None</span></code>; defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>An override color index for the control shape. If this is omitted, no color will be applied.</p>
</dd>
<dt class="field-even">offsetGroups/og</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> of <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>; defaults to <code class="docutils literal notranslate"><span class="pre">'offset'</span></code></p>
<p>A string or list of strings specifying the suffixes, and number, of transformationally-matched offset groups. Pass
<code class="docutils literal notranslate"><span class="pre">None</span></code> to create a control with no offset groups.</p>
</dd>
<dt class="field-odd">under/u</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference internal" href="pools/nodes/transform.html#paya.runtime.nodes.Transform" title="paya.runtime.nodes.Transform"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transform</span></code></a>; defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>An optional parent for the topmost offset group.</p>
</dd>
<dt class="field-even">pickWalkParent/pwp</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference internal" href="pools/nodes/transform.html#paya.runtime.nodes.Transform" title="paya.runtime.nodes.Transform"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transform</span></code></a>; defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>A node to shift to when the ‘up’ arrow key is pressed with the main control selected. Allows animators
to skip offset groups when pick-walking complex hierarchies.</p>
</dd>
<dt class="field-odd">asControl/ac</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code></p>
<p>Set this to <code class="docutils literal notranslate"><span class="pre">False</span></code> to create a regular empty group instead of a control.</p>
</dd>
</dl>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline"></a></h2>
<p>In the following example, a custom matrix is used to create a control that’s flat against the ground plane, but angled
along the foot of a leg chain:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">Paya</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">Viewport</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">Outliner</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">anklePoint</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">PyNode</span><span class="p">(</span><span class="s1">&#39;joint3&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getWorldPosition</span><span class="p">()</span>
<span class="n">toePoint</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">PyNode</span><span class="p">(</span><span class="s1">&#39;joint5&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getWorldPosition</span><span class="p">()</span>
<span class="n">ballPoint</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">PyNode</span><span class="p">(</span><span class="s1">&#39;joint4&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getWorldPosition</span><span class="p">()</span>

<span class="n">aimVec</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">upVec</span> <span class="o">=</span> <span class="n">toePoint</span><span class="o">-</span><span class="n">anklePoint</span>

<span class="n">ctMatrix</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">createMatrix</span><span class="p">(</span>
    <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">aimVec</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="n">upVec</span><span class="p">,</span>
    <span class="n">translate</span><span class="o">=</span><span class="n">ballPoint</span>
    <span class="p">)</span>

<span class="c1"># Discard scale information</span>
<span class="n">ctMatrix</span> <span class="o">=</span> <span class="n">ctMatrix</span><span class="o">.</span><span class="n">pick</span><span class="p">(</span><span class="n">translate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">rotate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">with</span> <span class="n">r</span><span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="s1">&#39;R_foot_roll&#39;</span><span class="p">):</span>
    <span class="n">r</span><span class="o">.</span><span class="n">createControl</span><span class="p">(</span>
        <span class="n">worldMatrix</span><span class="o">=</span><span class="n">ctMatrix</span><span class="p">,</span>
        <span class="n">keyable</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;ro&#39;</span><span class="p">],</span>
        <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;sphere&#39;</span>
        <span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><figure class="align-center">
<img alt="_images/ctrl_matrix.gif" src="_images/ctrl_matrix.gif" />
</figure>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><figure class="align-center">
<img alt="_images/ctrl_hierarchy.png" src="_images/ctrl_hierarchy.png" />
</figure>
</div></div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="controls.html" class="btn btn-neutral float-left" title="Controls" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="connecting_controls.html" class="btn btn-neutral float-right" title="Connecting Controls" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Kimon Matara.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>