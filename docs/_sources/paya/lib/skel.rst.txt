=============
paya.lib.skel
=============

.. py:module:: paya.lib.skel

.. py:class:: Chain(*joints)

    .. py:staticmethod:: __new__(*joints)
    
        Create and return a new object.  See help(type) for accurate signature.
    
    .. py:method:: __init__(*joints)
    
        :param \*joints: the joint content for the
            :class:`~paya.lib.skel.Chain` instance
    
    .. py:classmethod:: getFromStartEnd(startJoint, endJoint)
    
        :param startJoint: the root joint for the chain
        :type startJoint: str, :class:`~paya.nodetypes.joint.Joint`
        :param endJoint: the end (tip) joint for the chain
        :type endJoint: str, :class:`~paya.nodetypes.joint.Joint`
        :return: A chain from the start joint to the end joint, inclusively.
        :rtype: :class:`Chain`
    
    .. py:classmethod:: getFromRoot(rootJoint)
    
        :param startJoint: the root joint for the chain
        :type startJoint: str, :class:`~paya.nodetypes.joint.Joint`
        :return: A chain from the specified root joint. The chain will
            terminate before the first branch.
        :rtype: :class:`Chain`
    
    .. py:classmethod:: createFromMatrices(matrices, under=None)
    
        Creates a chain from matrices. The joints will match the matrices
        exactly; no attempt is made to orient the chain.
        
        :param matrices: the matrices to use
        :param under/u: an optional parent for the chain; defaults to None
        :return: :class:`Chain`
    
    .. py:classmethod:: createFromPoints(points, upVector, downAxis='y', upAxis='x', under=None, tolerance=1e-07)
    
        Builds a chain from points. The side ('up') axis will be calculated
        using cross products, but those will be biased towards the reference
        up vector.
        
        :param points: a world position for each joint
        :param upVector: the reference up vector
        :param str downAxis/da: the 'bone' axis; defaults to
            ``paya.config.defaultDownAxis``
        :param str upAxis/ua: the axis to map to the up vector; defaults to
            ``paya.config.defaultUpAxis``
        :param under/u: an optional parent for the chain; defaults to None
        :param float tolerance/tol: see
            :func:`paya.lib.mathops.getAimingMatricesFromPoints`
        :return: The constructed chain.
        :rtype: :class:`Chain`
    
    .. py:classmethod:: createFromCurve(curve, numberOrFractions, upCurve=None, upVector=None, downAxis='y', upAxis='x', tolerance=1e-07)
    
        Draws a chain (once) along a curve. Either 'upCurve' or 'upVector'
        must be provided.
        
        :param curve: the curve along which to distribute joints
        :type curve: str or :class:`~pymel.core.general.PyNode`
        :param numberOrFractions: this can either be a list of length
            fractions, or a number
        :param upCurve/upc: a curve to aim towards; defaults to None
        :type upCurve/upc: str or :class:`~pymel.core.general.PyNode`
        :param upVector/upv: a reference up vector
        :type upVector/upv: list, tuple or
            :class:`~paya.datatypes.vector.Vector`
        :param str downAxis/da: the 'bone' axis; defaults to
            ``paya.config.defaultDownAxis``
        :param str upAxis/ua: the axis to map to the up vector(s); defaults to
            ``paya.config.defaultUpAxis``
        :param float tolerance/tol: see
            :func:`paya.lib.mathops.getAimingMatricesFromPoints`
        :return: The constructed chain.
        :rtype: :class:`Chain`
    
    .. py:method:: orient(upVector, downAxis='y', upAxis='x', tolerance=1e-07)
    
        Orients this chain.
        
        :param upVector: a reference up vector
        :type upVector: list, :class:`~paya.datatypes.vector.Vector`
        :param str downAxis/da: the aiming (bone) axis; defaults to
            :attr:`paya.config.defaultDownAxis`
        :param str upAxis: the axis to map to the up vector; defaults to
            :attr:`paya.config.defaultUpAxis`
        :param float tolerance/tol: see
            :func:`paya.lib.mathops.getAimingMatricesFromPoints`
        :return: ``self``
        :rtype: :class:`Chain`
    
    .. py:method:: bones()
    
        :return: A :class:`~paya.lib.skel.Bone` instance for every joint pair
            in the chain.
        :rtype: :class:`~paya.lib.skel.Bone`
    
    .. py:method:: vectors(plug=False)
    
        :param bool plug/p: return attributes instead of values; defaults to
            False
        :return: A vector for each bone in this chain.
        :rtype: :class:`list` of :class:`~paya.plugtypes.vector.Vector`
            or :class:`~paya.datatypes.vector.Vector`
    
    .. py:method:: points(plug=False)
    
        :param bool plug/p: return attributes instead of values; defaults to
            False
        :return: A world position for each joint in this chain.
        :rtype: :class:`list` of :class:`~paya.datatypes.point.Point`
    
    .. py:method:: contiguous()
    
        :return: True if every member of this chain is a child of its
            predecessor, otherwise False.
        :rtype: bool
    
    .. py:method:: roots()
    
        :return: The first joint, and any member which is not a child of its
            predecessor.
        :rtype: list
    
    .. py:method:: length(plug=False)
    
        :param bool plug/p: return an attribute instead of a value; defaults
            to False
        :return: The length of this chain.
        :rtype: :class:`float` or :class:`~paya.plugtypes.math1D.Math1D`
    
    .. py:method:: insertJointsAtRatios(ratios, skipNumberingIfSingle=True, startNumber=1, name=None, inheritNames=True, suffix=None)
    
        Inserts joints at the specified ratios, 'subdividing' the chain.
        This is an in-place operation, and this Chain instance's membership
        will be modified.
        
        :param list ratios: the ratios at which to insert joints
        :param bool skipNumberingIfSingle/sns: if only one ratio is specified,
            don't add numbering; defaults to True
        :param int startNumber/sn: for joint names, the starting number;
            defaults to 1
        :param name/n: one or more name elements; defaults to None
        :type name/n: None, str, int, list or tuple
        :param bool inheritNames/inn: inherit names from
            :class:`~paya.lib.names.Name` blocks; defaults to True
        :param suffix/suf: if string, append to name; if ``True``, look up a
            type suffix; if ``False``, omit suffixes; defaults to
            :attr:`paya.config.autoSuffix`
        :raises AssertionError: not all ratios are in the 0.0 -> 1.0 range
        :return: The new joints.
        :rtype: :class:`list`
    
    .. py:method:: skinClusters()
    
        :return: Any skinClusters associated with any joint in this chain, in
            no particular order.
        :rtype: list
    
    .. py:method:: ikHandles()
    
        :return: IK handles affecting this chain.
        :rtype: :class:`list` of :class:`~paya.nodetypes.ikHandle.IkHandle`
    
    .. py:method:: downAxis()
    
        :return: The 'bone' axis of this chain (e.g. 'x')
        :rtype: str
    
    .. py:method:: duplicate(name=None, inheritName=True, suffix=None, start=1)
    
        Duplicates this chain, with smart reparenting if it's not contiguous.
        
        :param name/n: one or more name elements
        :type name/n: list, str, int
        :param bool inheritName/inn: inherit from
            :class:`~paya.lib.names.Name` blocks; defaults to True
        :param bool suffix/suf: if string, append; if True, apply the joint
            suffix; if False; omit suffix; defaults to
            :attr:`paya.config.autoSuffix`
        :param int start/s: the number to start from; defaults to 1
        :return: The chain duplicate.
        :rtype: :class:`~paya.lib.skel.Chain`
    
    .. py:method:: rename(*elems, inheritName=True, suffix=None, start=1)
    
        Renames this chain. Numbers will be added before the suffix.
        
        :param \*elems: one or more name elements
        :type \*elems: list, str, int
        :param bool inheritName/inn: inherit from
            :class:`~paya.lib.names.Name` blocks; defaults to True
        :param bool suffix/suf: if string, append; if True, apply the joint
            suffix; if False; omit suffix; defaults to
            :attr:`paya.config.autoSuffix`
        :param int start/s: the number to start from; defaults to 1
        :return: ``self``
    
    .. py:method:: compose()
    
        Ensures that every member of this chain is a child of its predecessor.
    
    .. py:method:: explode()
    
        Reparents every joint under the parent of the first joint.
    
    .. py:method:: appendChain(otherChain, replaceTip=True)
    
        This is an in-place operation. Splices ``otherChain`` to the bottom of
        this chain and updates the membership.
        
        :param otherChain: the chain to append to this one
        :type otherChain: list or :class:`Chain`
        :param bool replaceTip/rt: replace this chain's tip joint; defaults
            to True
        :return: ``self``
        :rtype: :class:`Chain`
    
    .. py:method:: getDefaultPolePoint(distance=1.0)
    
        This method creates a temporary IK handle and samples its default
        ``poleVector`` value. For this reason it will be affected by any
        ``preferredAngle`` values.
        
        :param distance/d: the pole point's distance from the chain's chord
            vector axis; defaults to 1.0
        :type distance/d: float or int
        :return: An inert world-position point target for a pole vector
            constraint or
            :meth:`~paya.nodetypes.ikhandle.IkHandle.setPolePoint`.
        :rtype: :class:`~paya.datatypes.point.Point`
    
    .. py:method:: autoPreferredAngle(upAxis, upVector=None)
    
        Automatically configures ``preferredAngle`` on the internal joints to
        prevent lockout when creating an IK handle on an in-line chain.
        
        :param upAxis: the dominant chain 'bend' axis, e.g. '-x'
        :param upVector/upv: an optional 'up' vector; used to override wind
            direction
        :type upVector/upv: list, tuple or
            :class:`~paya.datatypes.vector.Vector`
        :raises AssertionError: the chain is not contiguous
        :return: ``self``
        :rtype: :class:`Chain`
    
    .. py:method:: reset()
    
        Sets rotations on every joint of this chain to [0.0, 0.0, 0.0].
        
        :return: ``self``
    
    .. py:method:: createIkHandle(solver=None, **createOptions)
    
        Creates an IK handle for this chain.
        
        :param str solver/sol: the solver to use; defaults to 'ikRPsolver' if
            this chain has more than two joints, otherwise 'ikSCsolver'
        :param \*\*createOptions: all overflow arguments are forwarded to
            :meth:`~paya.nodetypes.ikHandle.IkHandle.create`
        :return: The IK handle.
        :rtype: :class:`~paya.nodetypes.ikHandle.IkHandle`
    
    .. py:method:: createIkHandles()
    
        Creates One IK handle per bone in this chain. The IK handles will
        all use a single-chain solver.
        
        :return: The IK handles
        :rtype: :class:`list` of :class:`~paya.nodetypes.ikHandle.IkHandle`
    
    .. py:method:: __repr__()
    
        Return repr(self).

.. py:class:: Bone(*joints)

    A specialised subclass of :class:`~paya.lib.skel.Chain` for two-joint
    chains.

    .. py:method:: insertJoints(number, skipNumberingIfSingle=True, startNumber=1, name=None, inheritNames=True, suffix=None)
    
        Variant of :meth:`~Chain.insertJointsAtRatios`; inserts joints
        uniformly along the bone.
        
        :param int number: the number of joints to insert
        :param bool skipNumberingIfSingle/sns: if only one ratio is specified,
            don't add numbering; defaults to True
        :param int startNumber/sn: for joint names, the starting number;
            defaults to 1
        :param name/n: one or more name elements; defaults to None
        :type name/n: None, str, int, list or tuple
        :param bool inheritNames/inn: inherit names from
            :class:`~paya.lib.names.Name` blocks; defaults to True
        :param suffix/suf: if string, append to name; if ``True``, look up a
            type suffix; if ``False``, omit suffixes; defaults to
            :attr:`paya.config.autoSuffix`
        :return: The new joints.
        :rtype: :class:`list`

.. py:class:: Triad(*joints)

    A specialised subclass of :class:`~paya.lib.skel.Chain` for three-joint
    chains.